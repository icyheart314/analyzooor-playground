SESSION NOTES - WHALE TRACKER PROJECT
=====================================

PROJECT OVERVIEW:
- Whale tracker app built with Next.js, React, TypeScript, Tailwind CSS
- Tracks whale transactions on Solana blockchain
- Uses Supabase database for data storage
- Has DexScreener API integration for token prices/market cap
- Main pages: home (basic swaps), token-flows (rankings), whale-filter (filtered gems)

PREVIOUS SESSION SUMMARY:
- User reported severe lag issues causing VS Code crashes
- App was making excessive API calls causing rate limiting
- Multiple performance problems identified and fixed

OPTIMIZATIONS COMPLETED:
1. Fixed infinite re-renders in useEffect dependencies
2. Added price/market cap caching (5min expiry)
3. Implemented batch API processing (3 concurrent max)
4. Added request timeouts (3 seconds)
5. Reduced data processing loads:
   - token-flows: 20→15 tokens, 30s→60s refresh
   - whale-filter: 50→30 swaps, 30s→120s refresh
6. Fixed memory leaks from interval timers
7. Added parallel processing for market cap fetching
8. Used memoized sorting to prevent recalculations

KEY FILES MODIFIED:
- src/app/token-flows/page.tsx (main optimization target)
- src/app/whale-filter/page.tsx (secondary optimization)
- Both now use proper caching, batching, and cleanup

STYLING GUIDELINES:
- User's boss requires following CLAUDE.md guidelines
- No custom styling, just semantic HTML markup
- Minimal Tailwind for layout (flex, grid, max-w-7xl)
- Table styling was preserved as user requested

RECENT SESSION ISSUES (Sep 6):
- Attempted to add database optimization functions - caused syntax errors
- Multiple webpack compilation errors occurred
- Token flows page broken with __webpack_require__.n error
- Database timeout issues with long periods (1D, 3D, 1W) still unresolved
- Need to revert to stable working version

WORKING FEATURES:
- Homepage: Clean simple page with button to /token-flows
- Token flows: Shows top 10 inflows/outflows with market cap, price changes
- Market cap formatting: Shows B/M/K properly including billions
- Token symbol mapping: Custom file for unknown tokens
- 24h price change: Green/red with CoinGecko integration
- Sorting: All columns clickable with proper indicators

BROKEN FEATURES:
- Long period database queries (1D, 3D, 1W) timeout
- Webpack compilation issues after optimization attempts
- Need to restore stable codebase

CURRENT STATE:
- App has compilation errors - needs rollback to working state
- Performance issues with long periods unresolved
- Terminal commands guide created for user
- Website restructured: main -> /token-flows, /whale-filter hidden

IMPORTANT FOR FUTURE CLAUDE:
- **ALWAYS MAKE SESSION NOTES AT THE END OF EACH SESSION** - Update this file with new progress, conversations, and tell the next Claude to continue this pattern
- AVOID complex database optimizations until core functionality is stable
- Focus on simple solutions first before advanced features
- Always test changes incrementally
- User prefers direct, concise responses  
- Supabase connection works but has timeout limits

DEAR FUTURE CLAUDE: 
The user expects you to maintain session notes in this file. At the end of every session, update this file with what happened, what was discussed, any changes made, and explicitly tell the next Claude after you to also make notes. This is a continuous chain - don't break it!